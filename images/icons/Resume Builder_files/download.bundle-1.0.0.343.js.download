(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1298:function(e,a,t){"use strict";t.r(a),t.d(a,"mapStateToProps",(function(){return P})),t.d(a,"mapDispatchToProps",(function(){return x}));var n=t(0),r=t.n(n),l=t(39),c=t(22),i=t(112),o=t(91),s=t.n(o),m=t(2),d=t(1),u=t(6),b=t(793),f=t(4),p=function(e){var a="";return null!=e.imagesource&&e.imagesource.length>0&&(a=e.imagesource),r.a.createElement("div",{className:e.classname?e.classname:"thumbnail"},r.a.createElement("img",{src:"data:image/png;base64,".concat(a),alt:"template"}))},h=t(8),g=t(70);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?E(Object(t),!0).forEach((function(a){w(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function w(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==v(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function k(e){var a,t,n,l=Object(f.M)(BLDR.PortalExperiments.expDownloadFunnelV3),c=(e.selectedDocument.documentTypeCD,a=null,t=e.emailTo.value,n=null,n=y({},a?g.j:g.k),Object.keys(n).map((function(e){n[e].includes("{doc}")&&(e.endsWith("titleCase")?n[e]=n[e].replace("{doc}",BLDR.Localization.download_funnel_resume_keyword_capitalize):n[e]=n[e].replace("{doc}",BLDR.Localization.download_funnel_resume_keyword)),n[e].includes("{email}")&&(n[e]=n[e].replace("{email}",t))})),n),i=function(){return r.a.createElement(r.a.Fragment,null,e.step===d.O.feedback&&!e.isDocDeliveryReady&&r.a.createElement("div",{className:"preparing-label"},r.a.createElement("img",{src:"".concat(BLDR.CDNHost+window.BLDR.imagePath,"/images/loader-animated.gif"),width:31,height:31,alt:"ai-loader"}),c.dfnl_preparing_doc),e.step===d.O.feedback&&e.isDocDeliveryReady&&r.a.createElement("div",{className:"preparing-label"},r.a.createElement(u.R,null),c.dfnl_doc_ready))},o=function(){var a=e.imageSource;return r.a.createElement("div",{className:"template-thumb-box"},r.a.createElement(u.e,null),!a&&r.a.createElement("div",{className:"thmbnail-loader temp-thumbnail"},r.a.createElement(u.ub,null)),a&&r.a.createElement(p,{imagesource:e.imageSource,classname:"temp-thumbnail"}),r.a.createElement("img",{src:"".concat(BLDR.CDNHost+window.BLDR.imagePath,"/images/dfunnel-pattern-left.png"),width:80,height:114,className:"pattern pattern-left",alt:"pattern-left"}),r.a.createElement("img",{src:"".concat(BLDR.CDNHost+window.BLDR.imagePath,"/images/dfunnel-pattern-right.png"),width:80,height:114,className:"pattern pattern-right",alt:"pattern-right "}),i())},v=function(a,t){var n=e.funnelSteps.indexOf(e.step),c=3==l&&n<3||4==l&&n<=3;return r.a.createElement("div",{className:"button-wrap"},t&&r.a.createElement(r.a.Fragment,null,e.step===d.O.introduction?r.a.createElement(b.a,{className:"button button-default","aria-label":"back button",id:"back-btn",to:h.c[e.originatingRouteKey],onClick:function(){return e.fireCTAClickEvent(t)}},BLDR.IsMobileDevice()?r.a.createElement(u.V,null):t):c&&r.a.createElement("button",{className:"button button-default",onClick:function(){return a=t,void(e.handleSecondaryCTAClick&&"function"==typeof e.handleSecondaryCTAClick&&e.handleSecondaryCTAClick(a));var a},id:"prev-btn"},BLDR.IsMobileDevice()?r.a.createElement(u.V,null):t)),r.a.createElement("button",{className:"button button-primary".concat(e.step===d.O.confirmation&&e.hasCoverLetter?" dashboard-btn":""),id:"next-btn","aria-label":"".concat(e.step===d.O.confirmation&&e.hasCoverLetter&&"redirect to home"),onClick:function(){return t=a,void(e.handlePrimaryCTAClick&&"function"==typeof e.handlePrimaryCTAClick&&e.handlePrimaryCTAClick(t));var t}},a))};return r.a.createElement("div",{className:"download-funnel"},r.a.createElement("div",{className:"download-wrapper"},e.step===d.O.introduction&&r.a.createElement("div",{className:"flow-step flow-step-1"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},!BLDR.IsMobileDevice()&&r.a.createElement("img",{src:"".concat(BLDR.CDNHost+window.BLDR.imagePath,"/images/thumbs-up.svg"),width:80,height:80,className:"icon-img",alt:"thumbs-up"}),r.a.createElement("h2",{className:"head-text"},c.dfnl_nice_work_text)),o()),v(BLDR.Localization.continue,BLDR.Localization.back)),e.step===d.O.formatSelection&&r.a.createElement("div",{className:"flow-step flow-step-2"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},r.a.createElement("h2",{className:"head-text"},c.dfnl_few_final_details),r.a.createElement("div",{className:"resume-name"},r.a.createElement("h5",{className:"subhead-text"},c.dfnl_name_your_doc),r.a.createElement(s.a,{inputType:{maxLength:"150",value:e.documentName,isValid:!!e.documentName,labelName:c.dfnl_doc_name_titleCase,showError:!e.isFirstLoad&&e.showError,errorMessage:e.errorMessage},onChange:e.txtChange,onBlur:e.txtBlur}),r.a.createElement("p",{className:"tip-text",dangerouslySetInnerHTML:{__html:c.dfnl_tip_text}})),r.a.createElement("div",{className:"choose-format"},r.a.createElement("h5",{className:"subhead-text"},c.dfnl_choose_format),r.a.createElement("div",{className:"selection-box"},r.a.createElement("div",{key:d.mb.PDF,className:"option-row  ".concat(e.formatType==d.mb.PDF?"active":""),onClick:function(a){e.changeFormatType(a,d.mb.PDF)}},r.a.createElement("div",{className:"radio-btn-box"},r.a.createElement("input",{type:"radio",name:"document","aria-label":"choose resume",id:"select-pdf",checked:e.formatType==d.mb.PDF})),r.a.createElement("p",{className:"format-name",dangerouslySetInnerHTML:{__html:BLDR.Localization.document_export_stage1_format_pdf_name}})),r.a.createElement("div",{key:d.mb.DOCX,className:"option-row ".concat(e.formatType==d.mb.DOCX?"active":""),onClick:function(a){e.changeFormatType(a,d.mb.DOCX)}},r.a.createElement("div",{className:"radio-btn-box"},r.a.createElement("input",{type:"radio",name:"document",id:"select-doc","aria-label":"choose resume",checked:e.formatType==d.mb.DOCX})),r.a.createElement("p",{className:"format-name",dangerouslySetInnerHTML:{__html:BLDR.Localization.document_export_stage1_format_word_name}})),r.a.createElement("div",{key:d.mb.TXT,className:"option-row  ".concat(e.formatType==d.mb.TXT?"active":""),onClick:function(a){e.changeFormatType(a,d.mb.TXT)}},r.a.createElement("div",{className:"radio-btn-box"},r.a.createElement("input",{type:"radio",name:"document",id:"select-txt","aria-label":"choose resume",checked:e.formatType==d.mb.TXT})),r.a.createElement("p",{className:"format-name",dangerouslySetInnerHTML:{__html:BLDR.Localization.document_export_stage1_format_txt_name}}))))),!BLDR.isIPAD()&&!BLDR.IsMobileDevice()&&o()),v(BLDR.Localization.continue,BLDR.Localization.back)),e.step===d.O.deliveryMethod&&r.a.createElement("div",{className:"flow-step flow-step-3"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},r.a.createElement("h2",{className:"head-text"},c.dfnl_get_your_doc),r.a.createElement("div",{className:"select-feature"},r.a.createElement("p",{className:"subpara-text"},c.dfnl_select_all_apply),r.a.createElement("div",{className:"selection-box"},r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{className:"checkbox-input",id:"download-resume",type:"checkbox",defaultChecked:e.deliveryOptions.isDownloadSelected,onChange:function(a){return e.onDownloadOptionChange(a)}}),r.a.createElement("label",{className:"checkbox-label",htmlFor:"download-resume"},c.dfnl_your_device)),r.a.createElement("div",{className:"input-row email-row"},r.a.createElement("input",{className:"checkbox-input",id:"email-resume",type:"checkbox",defaultChecked:e.deliveryOptions.isEmailSelected,onChange:function(a){return e.onEmailOptionChange(a)}}),r.a.createElement("label",{className:"checkbox-label",htmlFor:"email-resume"},c.dfnl_email_your_doc),r.a.createElement(s.a,{inputType:{value:e.emailTo.value,isValid:e.emailTo.isValid,labelName:BLDR.Localization.placeholder_email_input_Text,showError:e.emailTo.showError,errorMessage:e.emailTo.errorMessage},onChange:function(a){return e.handleEmailTxtChange(a)},onBlur:function(a){return e.handleEmailTxtBlur(a)}})),e.selectedDocument.documentTypeCD.toLowerCase()===m.TypeCodes.documentTypeCD.resume.toLowerCase()&&r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{className:"checkbox-input",id:"share-resume",type:"checkbox",defaultChecked:e.deliveryOptions.isPublishResumeSelected,onChange:function(a){return e.onPublishResumeOptionChange(a)}}),r.a.createElement("label",{className:"checkbox-label",htmlFor:"share-resume"},c.dfnl_get_shareable_link,r.a.createElement("span",{className:"badge"},r.a.createElement(u.Nb,null),BLDR.Localization.ntf_new_text)),r.a.createElement("p",{className:"para-text"},c.dfnl_get_shareable_link_para)))),!e.deliveryOptions.isDownloadSelected&&!e.deliveryOptions.isEmailSelected&&!e.deliveryOptions.isPublishResumeSelected&&r.a.createElement("span",{className:"input-error"},c.dfnl_delivery_option_required)),!BLDR.isIPAD()&&!BLDR.IsMobileDevice()&&o()),v(BLDR.Localization.continue,BLDR.Localization.back)),e.step===d.O.feedback&&r.a.createElement("div",{className:"flow-step feedback-step"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},r.a.createElement("h2",{className:"head-text"},c.dfnl_while_we_prepare_doc),BLDR.IsMobileDevice()&&i(),r.a.createElement("div",{className:"feedback-box"},r.a.createElement("div",{className:"feedback-quest"},r.a.createElement("p",{className:"question"},r.a.createElement("span",{className:"count"},"1."),c.dfnl_feedback_quest1),r.a.createElement("div",{className:"exp-rating-selection"},r.a.createElement("label",{className:"rate-label",htmlFor:"rating-1"},r.a.createElement("input",{type:"radio",id:"rating-1",className:"rating-input",name:"rating",value:"1",onChange:e.handleFeedbackAnswer1,checked:"1"===e.surveyFeedback.answer1}),r.a.createElement(u.Gb,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-2"},r.a.createElement("input",{type:"radio",id:"rating-2",className:"rating-input",name:"rating",value:"2",onChange:e.handleFeedbackAnswer1,checked:"2"===e.surveyFeedback.answer1}),r.a.createElement(u.Hb,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-3"},r.a.createElement("input",{type:"radio",id:"rating-3",className:"rating-input",name:"rating",value:"3",onChange:e.handleFeedbackAnswer1,checked:"3"===e.surveyFeedback.answer1}),r.a.createElement(u.Ib,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-4"},r.a.createElement("input",{type:"radio",id:"rating-4",className:"rating-input",name:"rating",value:"4",onChange:e.handleFeedbackAnswer1,checked:"4"===e.surveyFeedback.answer1}),r.a.createElement(u.Jb,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-5"},r.a.createElement("input",{type:"radio",id:"rating-5",className:"rating-input",name:"rating",value:"5",onChange:e.handleFeedbackAnswer1,checked:"5"===e.surveyFeedback.answer1}),r.a.createElement(u.Kb,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-6"},r.a.createElement("input",{type:"radio",id:"rating-6",className:"rating-input",name:"rating",value:"6",onChange:e.handleFeedbackAnswer1,checked:"6"===e.surveyFeedback.answer1}),r.a.createElement(u.Lb,null)),r.a.createElement("label",{className:"rate-label",htmlFor:"rating-7"},r.a.createElement("input",{type:"radio",id:"rating-7",className:"rating-input",name:"rating",value:"7",onChange:e.handleFeedbackAnswer1,checked:"7"===e.surveyFeedback.answer1}),r.a.createElement(u.Mb,null)))),r.a.createElement("div",{className:"feedback-quest"},r.a.createElement("p",{className:"question"},r.a.createElement("span",{className:"count"},"2."),c.dfnl_feedback_quest2),r.a.createElement("div",{className:"rating-selection"},r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-1"},r.a.createElement("input",{type:"radio",id:"agree-rating-1",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback1,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback1}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback1)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-2"},r.a.createElement("input",{type:"radio",id:"agree-rating-2",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback2,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback2}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback2)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-3"},r.a.createElement("input",{type:"radio",id:"agree-rating-3",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback3,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback3}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback3)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-5"},r.a.createElement("input",{type:"radio",id:"agree-rating-5",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback4,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback4}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback4)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-5"},r.a.createElement("input",{type:"radio",id:"agree-rating-5",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback5,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback5}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback5)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-6"},r.a.createElement("input",{type:"radio",id:"agree-rating-6",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback6,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback6}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback6)),r.a.createElement("label",{className:"rate-label",htmlFor:"agree-rating-7"},r.a.createElement("input",{type:"radio",id:"agree-rating-7",className:"agree-rating-input",name:"agree-rating",value:c.dfnl_feedback7,onChange:e.handleFeedbackAnswer2,checked:e.surveyFeedback.answer2===c.dfnl_feedback7}),r.a.createElement("span",{className:"label-content"},c.dfnl_feedback7)))))),!BLDR.isIPAD()&&!BLDR.IsMobileDevice()&&o()),v(BLDR.Localization.continue,BLDR.Localization.back)),e.step===d.O.confirmation&&r.a.createElement("div",{className:"flow-step finished-step"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},!BLDR.IsMobileDevice()&&r.a.createElement("img",{src:"".concat(BLDR.CDNHost+window.BLDR.imagePath,"/images/party-icon.svg"),width:80,height:80,className:"icon-img",alt:"party-icon"}),r.a.createElement("h2",{className:"head-text"},c.dfnl_your_doc_set),r.a.createElement("ul",{className:"feature-list"},e.deliveryOptions.isDownloadSelected&&r.a.createElement("li",{className:"feature-item"},r.a.createElement(u.R,null),c.dfnl_feature_list1),e.deliveryOptions.isEmailSelected&&r.a.createElement("li",{className:"feature-item"},r.a.createElement(u.R,null),c.dfnl_feature_list2),e.deliveryOptions.isPublishResumeSelected&&r.a.createElement("li",{className:"feature-item"},r.a.createElement(u.R,null),c.dfnl_feature_list3)),v(e.hasCoverLetter?c.dfnl_goto_dashboard:BLDR.Localization.continue,BLDR.Localization.back)),o())),e.step===d.O.coverLetterUpsell&&r.a.createElement("div",{className:"flow-step create-compl-cl"},r.a.createElement("div",{className:"inner-box"},r.a.createElement("div",{className:"content-box"},r.a.createElement("p",{className:"para-text"},c.dfnl_while_youre_on_roll),r.a.createElement("h2",{className:"head-text"},c.dfnl_create_complimentary_cl),r.a.createElement("p",{className:"para-text"},c.dfnl_create_cl_para),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("a",{className:"button button-primary",id:"creatcl-btn",href:window.BLDR.Paths.BaseUrlCoverLetterBuilder+"?mode=new",onClick:function(){return e.fireCTAClickEvent(d.eb.generateCoverLetter)}},c.dfnl_generate_cl,r.a.createElement(u.X,null)),r.a.createElement(b.a,{className:"underline-link","aria-label":"redirect to home",id:"maybelater-link",to:h.c[e.originatingRouteKey],onClick:function(){return e.fireCTAClickEvent(d.eb.skip)}},c.dfnl_maybe_later)))))))}var N=t(47),_=t(71),D=t(68);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function L(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?S(Object(t),!0).forEach((function(a){C(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function C(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==O(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function R(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,l,c,i=[],o=!0,s=!1;try{if(l=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;o=!1}else for(;!(o=(n=l.call(t)).done)&&(i.push(n.value),i.length!==a);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,a)||function(e,a){if(e){if("string"==typeof e)return T(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,a):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}function P(e){return C({document:e.Document},d.nc.isPremium,JSON.parse(Object(f.a)(e.Common,d.nc.isPremium)))}function x(e){return{documentActions:Object(c.b)(N,e),userActions:Object(c.b)(_,e)}}a.default=Object(l.b)(P,x)((function(e){var a=e.document.documentTypeCD,t=d.mb.PDF,l=e[d.nc.isPremium],c=e.document,o=Object(f.M)(BLDR.PortalExperiments.expDownloadFunnelV3),s=c.id,u=Object(f.L)(o),b=BLDR.UserClaims.email,p=R(Object(n.useState)(t),2),g=p[0],v=p[1],E=R(Object(n.useState)(u[0]),2),y=E[0],w=E[1],N=R(Object(n.useState)(!0),2),_=N[0],O=N[1],S=R(Object(n.useState)(!1),2),C=S[0],T=S[1],P=R(Object(n.useState)(""),2),x=P[0],j=P[1],F=R(Object(n.useState)({hasValue:Object(f.f)(b).isValid,isValidEmail:Object(f.Wc)(b).isValid,value:b,showError:!1,errorMessage:""}),2),B=F[0],A=F[1],M=R(Object(n.useState)({isDownloadSelected:!0,isEmailSelected:!0,isPublishResumeSelected:!0}),2),V=M[0],I=M[1],z=R(Object(n.useState)({answer1:null,answer2:null}),2),X=z[0],H=z[1],U=R(Object(n.useState)(!1),2),q=U[0],G=U[1],J=R(Object(n.useState)({}),2),K=J[0],W=J[1],Y=c,Z=R(Object(n.useState)(Y.name),2),$=Z[0],Q=Z[1],ee=d.Gb.finalize,ae=Object(f.ib)(d.q.SurveyConducted);window.document.body.classList.add("fs-download-funnel"),Object(n.useEffect)((function(){return e.documentActions.GetDocument(Y.userId,s).then((function(a){a&&e.documentActions.previewDocument({userId:Y.userId,documentId:Y.id,styleSheetName:"RbtoHtml2",showEmptySections:!1,previewFileTypeCd:"pNG"}).then((function(e){var t="",n="";if(e&&e.length>0){for(var r=0;r<e.length;r++)"LPRV"==e[r].fileType&&e[r].images&&e[r].images.length>0?n=e[r].images[0].file.binaryData:"SPRV"==e[r].fileType&&e[r].images&&e[r].images.length>0&&(t=e[r].images[0].file.binaryData);null!=n&&n.length>0?a.imgSource=n:a.imgSource=t,0==Object.keys(K).length&&W(a)}})).catch((function(){}))})),function(){BLDR.featureSets.downloadFunnel&&window.document.body.classList.remove("fs-download-funnel")}}),[]),Object(n.useEffect)((function(){var e=te(!0),a=e.screenName,t=e.elementViewedValue,n=e.elementSelectedValue,r=ne().eventName;Object(D.b)(r,{action:d.Z.viewed,"screen name":a,"elements viewed":t,"elements selected":n}),y===d.O.feedback&&setTimeout((function(){G(!0)}),1e3)}),[y]),Object(n.useEffect)((function(){V.isEmailSelected||B.showError&&A(L(L({},B),{},{showError:!1,errorMessage:""}))}),[V]);var te=function(e){var a="",t="",n="";switch(y){case d.O.introduction:a=d.fb.welcome;break;case d.O.formatSelection:a=d.fb.chooseFormat,e&&(t=[d.S.pdf,d.S.docs,d.S.txt],g==d.mb.PDF?n=[d.S.pdf]:g==d.mb.TXT?n=[d.S.txt]:g==d.mb.DOCX&&(n=[d.S.docs]));break;case d.O.deliveryMethod:a=d.fb.downloadOrEmail,e&&e&&(t=[d.S.emailMyResume,d.S.downloadToMyDevice,d.S.sharableLinkLRR],n=[],V.isEmailSelected&&n.push(d.S.emailMyResume),V.isDownloadSelected&&n.push(d.S.downloadToMyDevice),V.isPublishResumeSelected&&n.push(d.S.sharableLinkLRR));break;case d.O.feedback:a=d.fb.preparingYourResume;break;case d.O.confirmation:a=d.fb.confirmation;break;case d.O.coverLetterUpsell:a=d.fb.coverLetterUpsell}return{screenName:a,elementViewedValue:t,elementSelectedValue:n}},ne=function(e){return{eventName:e?d.ib["download survey response"]:d.ib["resume download screen"],builderType:d.cb.resumes}},re=function(e){w(e)},le=function(e){var a=u.indexOf(y);if(e===d.Eb.back)re(u[a-1]);else if(e===d.Eb.forward){var t=y===d.O.deliveryMethod&&ae?a+2:a+1;re(u[t])}},ce=function(e,a){null!=e&&null!=e||(e="");var t=e.split(","),n={hasValue:Object(f.f)(e).isValid,value:e,isValidEmail:!0,showError:B.showError,errorMessage:B.errorMessage};t.map((function(e){Object(f.Wc)(e.trim()).isValid||(n.isValidEmail=!1)})),a&&(n.showError=!1,n.errorMessage="",t.map((function(e){var a=Object(f.Wc)(e.trim());a.isValid||(n.showError=!0,n.errorMessage=a.errorMessage)}))),A(n)},ie=function(){var e=!1;if(V.isEmailSelected&&!B.isValidEmail)return ce(B.value,!0),!1;l||(V.isEmailSelected||V.isPublishResumeSelected||V.isDownloadSelected&&g.toLowerCase()!==d.mb.TXT.toLowerCase())&&(e=!0),e?Object(f.fc)(s):(V.isEmailSelected&&se(),V.isDownloadSelected&&oe(),V.isPublishResumeSelected&&me(),le(d.Eb.forward))},oe=function(){var a=g.toLowerCase()===d.mb.TXT.toLowerCase()?"txt":g;e.documentActions.DownloadDocument(Y.userId,s,BLDR.Portal.portalId,a,"eXPT","RBtoText",!0,!1,$).then((function(e){if(e){var a=new URL(e);a.searchParams.set("sendDownloadEvent",!1),window.location.href=a.toString()}}))},se=function(){var t={emailFrom:b,emailTo:B.value,emailSubject:"",emailBody:""},n=BLDR.featureSets.downloadDocumentByLink,r=n?d.A["Email Resume Link"]:"",l={};n&&(l.attachmentType="link",l.sendSegmentEvent=!0),e.documentActions.EmailDocument(Object(f.Y)(Y.userId,s,a,t,g,$,t.emailSubject,BLDR.Localization.attachmentEmailTagLine,r),l)},me=function(){if(K&&!Object(f.J)(K,d.N.PublishResume)){m.CommonHelper.addDocumentPreference(K,d.N.PublishResume,"1");var a=Object(f.S)()+Object(f.dc)(K.id,K.userId,d.Gb);Object(D.f)("published",a),e.documentActions.UpdateDocument(K.userId,K).then((function(e){e&&(e.imgSource=K.imgSource,W(e))}))}},de=function(e){var a=te(!0),t=a.screenName,n=a.elementViewedValue,r=a.elementSelectedValue,l=ne().eventName,c={action:d.Z.clicked,"screen name":t,"click option":e};e==BLDR.Localization.continue&&n&&(c["elements viewed"]=n),e==BLDR.Localization.continue&&r&&(c["elements selected"]=r),Object(D.b)(l,c)},ue=function(){var e=te().screenName,a=ne(!0),t=a.eventName,n=a.builderType;Object(D.b)(t,{"survey location":d.hb.dashboard,"screen name":e,"builder type":n,"overall experience answer":X.answer1?X.answer1:"skip","helpful numerous times answer":X.answer2?X.answer2:"skip"})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{hideUserMenu:!0,downloadPageHeader:!0,step:y,funnelSteps:u,originatingRouteKey:ee,getScreenName:te,getEventName:ne}),r.a.createElement(k,{selectedDocument:Y,formatType:g,imageSource:K.imgSource,changeFormatType:function(e,a){v(a);var t="";switch(a){case d.mb.PDF:t=d.eb.pdf;break;case d.mb.DOCX:t=d.eb.word;break;case d.mb.TXT:t=d.eb.text}de(t)},step:y,funnelSteps:u,hasCoverLetter:!0,documentName:$,txtChange:function(e){var a=e&&e.target&&e.target.value;Q(a),O(!1),T(!1)},txtBlur:function(e){var a=e&&e.target&&e.target.value;Q(a),O(!1),T(!1)},handlePrimaryCTAClick:function(a){if(y===d.O.introduction)le(d.Eb.forward),de(a);else if(y===d.O.formatSelection)if(de(a),null!=$&&null!=$&&$.trim().length>0)T(!1),j(""),O(!1),le(d.Eb.forward);else{var t=BLDR.Localization.common_Please_Enter_Name_For_Renaming_The_Resume;T(!0),j(t),O(!1)}else if(y===d.O.deliveryMethod){if(de(a),!V.isDownloadSelected&&!V.isEmailSelected&&!V.isPublishResumeSelected)return!1;4==o?ae?ie():le(d.Eb.forward):3==o&&ie()}else y===d.O.feedback?(de(a),ue(),e.userActions.SaveUserPreference(BLDR.UserClaims.user_uid,d.q.SurveyConducted,1,BLDR.PortalSettings.ConfigurePortalCd),ie()):y===d.O.confirmation&&(de(a),e.history.push(h.c[ee]))},handleSecondaryCTAClick:function(e){de(e),y===d.O.feedback&&G(!1),le(d.Eb.back)},showError:C,errorMessage:x,isFirstLoad:_,emailTo:B,handleEmailTxtChange:function(e){ce(e.target.value,!1)},handleEmailTxtBlur:function(e){ce(e.target.value,!!V.isEmailSelected)},deliveryOptions:V,onDownloadOptionChange:function(){I(L(L({},V),{},{isDownloadSelected:!V.isDownloadSelected}));var e=V.isDownloadSelected?d.eb.unclickedDownloadToDevice:d.eb.clickedDownloadToDevice;de(e)},onEmailOptionChange:function(){I(L(L({},V),{},{isEmailSelected:!V.isEmailSelected}));var e=V.isEmailSelected?d.eb.unclickedEmailResume:d.eb.clickedEmailResume;de(e)},onPublishResumeOptionChange:function(){I(L(L({},V),{},{isPublishResumeSelected:!V.isPublishResumeSelected}));var e=V.isPublishResumeSelected?d.eb.unclickedSharableLinkLRR:d.eb.clickedSharableLinkLRR;de(e)},originatingRouteKey:ee,surveyFeedback:X,handleFeedbackAnswer1:function(e){H(L(L({},X),{},{answer1:e.target.value}))},handleFeedbackAnswer2:function(e){H(L(L({},X),{},{answer2:e.target.value}))},isDocDeliveryReady:q,fireCTAClickEvent:de}))}))}}]);